## best solution of $Ax=b$ when there is no solution
- normal equation/least square: $Ax=b$ when $m>n$(measuring) may not have a solution, but $A^TA\hat{x}=A^Tb$ have.
- $A^TA$ is square matrix, and symmetric.
- $A^TA\hat{x}=A^Tb$ where $\hat{x}$ may has a solution
- $N(A^TA)=N(A),rank(A^TA)=rank(A)$
    > proof: $Ax=0$ and $A^TAx=0$ has the same solution, because x that matches first requirement matches the last one.
    - if $A$ has independent columns, then $A^TA$ is invertable.
    > another proof: suppose $A^TAx=0$, to prove x must be zero: idea: left multiply $x^T\to x^TA^TAx=0=(Ax)^T(Ax)=\left \| Ax\right \|^2\to Ax=0$($Ax$ is vector), because A has independent columns, so $x=0$. Over.

## projection
- by default vectors are column vectors.
- project $\vec{b}$ to $\vec{a}$ got $\vec{p}=x\vec{a}$, $\vec{e}=\vec{b}-\vec{p}$. $a^T(b-xa)=0\to x=\frac{a^Tb}{a^Ta}$
- project $p=a\frac{a^Tb}{a^Ta}=Pb$, where matrix $P=\frac{aa^T}{a^Ta}$
- properties:
    - $C(P)$ is a line through $a$, $rank(P)=1$.
    - $P^T=P$($aa^T$ is symmetric),$P^2=P$
- reason: $Ax=b$ may have no solution, so to solve $A\hat{x}=p$ instead, where $p$ is close to $b$.
- expand from line to plane: $p=A\hat{x}$ and find $\hat{x}$: key is $e=b-A\hat{x}\bot $ plane: $a_1^T(b-A\hat{x})=0,a_2^T(b-A\hat{x})=0$, so $A^T(b-A\hat{x})=[0;0]$ ($\hat{x}=[\hat{x_1};\hat{x_2}],A=[a_1\ a_2],A^T=[a_1^T;a_2^T]$).
- $e$ is in $N(A^T)$ so $e\bot C(A)$
- $A^TA\hat{x}=A^Tb$, $\hat{x}=(A^TA)^{-1}A^Tb$, $p=A\hat{x}=A(A^TA)^{-1}A^Tb=Pb$ (remember $A$ may be non-invertable, otherwise $P=I$. But $A^TA$ is invertable, because $A$ is composed of two basis and is column full rank)
- properities: $P^T=P,P^2=P$
 